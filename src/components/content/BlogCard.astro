---
/**
 * Blog Card Component - Level Garment
 * Displays a blog post preview card
 */
export interface Props {
  title: string;
  slug: string;
  excerpt: string;
  publishDate: string;
  category?: string;
  image?: string;
}

const {
  title,
  slug,
  excerpt,
  publishDate,
  category = 'Berita',
  image = '/assets/images/blog-placeholder.jpg'
} = Astro.props;

// Format date for display
const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('id-ID', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};

// Get category color
const getCategoryColor = (cat: string) => {
  const colors: Record<string, string> = {
    'Edukasi': 'bg-primary/10 text-primary',
    'Rekomendasi': 'bg-primary/10 text-primary',
    'Tips': 'bg-primary/10 text-primary',
    'Berita': 'bg-primary/10 text-primary'
  };
  return colors[cat] || 'bg-primary/10 text-primary';
};
---

<article class="blog-card card card-hover overflow-hidden">
  <a href={`/berita/${slug}/`} class="block">
    <!-- Thumbnail -->
    <div class="blog-card-image aspect-video bg-gray-200 overflow-hidden">
      <img
        src={image}
        alt={title}
        class="w-full h-full object-cover transition-transform duration-300 hover:scale-105"
        loading="lazy"
        width="800"
        height="450"
      />
    </div>
  </a>

  <!-- Content -->
  <div class="blog-card-content p-6">
    <!-- Meta -->
    <div class="flex flex-wrap items-center gap-3 mb-3 text-sm">
      <span class={`px-2 py-1 rounded-full font-semibold ${getCategoryColor(category)}`}>
        {category}
      </span>
      <time datetime={publishDate} class="text-gray-500">
        {formatDate(publishDate)}
      </time>
    </div>

    <!-- Title & Excerpt -->
    <a href={`/berita/${slug}/`} class="block group">
      <h3 class="text-xl font-semibold mb-2 group-hover:text-primary transition-colors line-clamp-2">
        {title}
      </h3>
      <p class="text-gray-600 line-clamp-3">
        {excerpt}
      </p>
    </a>

    <!-- Read More Link -->
    <a
      href={`/berita/${slug}/`}
      class="inline-flex items-center gap-1 mt-4 text-primary font-semibold hover:gap-2 transition-all"
    >
      Baca Selengkapnya
      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </a>
  </div>
</article>

<style>
  .blog-card {
    display: flex;
    flex-direction: column;
    height: 100%;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .blog-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
  }

  .blog-card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .blog-card-content {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .blog-card-content h3 {
    margin-bottom: 0.5rem;
  }

  .blog-card-content p {
    flex: 1;
    margin-bottom: 1rem;
  }
</style>
