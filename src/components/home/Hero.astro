---
/**
 * Hero Section Component - Level Garment Homepage
 *
 * Features:
 * - Full screen height (100vh - header height)
 * - Two-column layout: 40% image left, 60% content right
 * - White background
 * - Slideshow with Tinder-style Card Stack Swipe animation
 *
 * @version 1.0.0
 */

interface Props {
  variant?: 'default' | 'simple';
}

const { variant = 'default' } = Astro.props;

// Hero content from WordPress (matches live site exactly)
const heroTitle = "Konveksi Pelajar Indonesia di Surabaya";

const heroDescription = [
  "Level Garment sebagai konveksi terpercaya para pelajar Indonesia untuk kebutuhan custom baju kegiatanmu seperti class meeting, study tour, foto album kenangan, event dies natalis, event konser sekolah, sampai ke event skala kecil maupun besar di kampusmu.",
  "Mulai dari kaos barcode spotify atau kaos sablon reflektif, jaket varsity full patch, workjacket, workshirt, jersey baseball, topi, lanyard & ID Card, semua kebutuhanmu serahkan aja ke Level Garment.",
  "Masih belum bikin kamu tertarik? Kami berikan cashback spesial untuk pemesanan pertamamu!"
];

// Slideshow images from live site
const slideshowImages = [
  '/assets/images/homepage/slideshow/20250424-slide_lg_3.webp',
  '/assets/images/homepage/slideshow/20250424-slide_lg_4.webp',
  '/assets/images/homepage/slideshow/20250424-slide_lg_5.webp',
  '/assets/images/homepage/slideshow/20250424-slide_lg_6.webp',
  '/assets/images/homepage/slideshow/20250424-slide_lg_8.webp',
  '/assets/images/homepage/slideshow/20250424-slide_lg_7.webp',
  '/assets/images/homepage/slideshow/20250424-slide_lg_1.webp',
  '/assets/images/homepage/slideshow/20250424-slide_lg_2.webp',
];
---

<!-- Hero Section - Full Screen with White Background -->
<section
  id="hero"
  class="hero-section relative w-full bg-white"
  style="height: calc(100vh - 80px);"
>
  <div class="container mx-auto px-4 h-full">
    <!-- Two Column Layout: 40% Image / 60% Content -->
    <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 h-full items-center">
      <!-- Left Column - Card Stack Slideshow (40% width = 2/5 columns) -->
      <div class="lg:col-span-2 order-2 lg:order-1">
        {variant === 'default' && (
          <div class="relative w-full h-[50vh] lg:h-[70vh] rounded-2xl">
            <!-- Card Stack Container -->
            <div class="card-stack-container absolute inset-0">
              {slideshowImages.map((img, index) => (
                <div
                  class={`card-stack-item absolute inset-0 rounded-2xl overflow-hidden shadow-2xl ${index === 0 ? 'top-card' : ''}`}
                  data-index={index}
                  style={`z-index: ${slideshowImages.length - index};`}
                >
                  <img
                    src={img}
                    alt={`Level Garment Slide ${index + 1}`}
                    class="w-full h-full object-cover"
                    loading={index === 0 ? 'eager' : 'lazy'}
                  />
                </div>
              ))}
            </div>
          </div>
        )}
      </div>

      <!-- Right Column - Content (60% width = 3/5 columns) -->
      <div class="lg:col-span-3 order-1 lg:order-2">
        <div class="space-y-6">
          <!-- Main Title -->
          <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold leading-tight text-gray-900">
            {heroTitle}
          </h1>

          <!-- Description -->
          <div class="prose prose-lg max-w-none">
            <div class="text-gray-600 text-base sm:text-lg lg:text-xl leading-relaxed space-y-4">
              {heroDescription.map((paragraph, index) => (
                <p key={index}>{paragraph}</p>
              ))}
            </div>
          </div>

          <!-- CTA Buttons -->
          <div class="flex flex-col sm:flex-row gap-4 pt-4">
            <a
              href="https://wa.me/6285183091599?text=Hai%20kak!%20Saya%20tertarik%20buat%20pesan%20custom%20baju."
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center justify-center px-8 py-4 bg-primary hover:bg-primary-dark text-white font-semibold rounded-full transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1"
            >
              <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
              </svg>
              Pesan Sekarang
            </a>
            <a
              href="/product/"
              class="inline-flex items-center justify-center px-8 py-4 border-2 border-primary text-primary hover:bg-primary hover:text-white font-semibold rounded-full transition-all duration-300"
            >
              Lihat Produk
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll Indicator -->
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
    <a href="#value-proposition" class="text-gray-400 hover:text-gray-600 transition-colors" aria-label="Scroll down">
      <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
      </svg>
    </a>
  </div>
</section>

<style>
  /* Tinder-style Card Stack Swipe Animation */

  .card-stack-item {
    transform-origin: center bottom;
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  /* Initial stack state - cards stacked with offset */
  .card-stack-item:not(.top-card) {
    transform: scale(0.9) translateY(10px);
    opacity: 0.7;
  }

  /* Second card in stack */
  .card-stack-item:nth-child(2):not(.top-card),
  .card-stack-item[data-stack-position="1"] {
    transform: scale(0.92) translateY(8px);
    opacity: 0.8;
  }

  /* Third card in stack */
  .card-stack-item:nth-child(3):not(.top-card),
  .card-stack-item[data-stack-position="2"] {
    transform: scale(0.94) translateY(6px);
    opacity: 0.85;
  }

  /* Top card (currently visible) */
  .card-stack-item.top-card {
    transform: scale(1) translateY(0) rotate(0deg);
    opacity: 1;
  }

  /* Card swiping left (dislike) */
  .card-stack-item.swipe-left {
    transform: translateX(-150%) translateY(50px) rotate(-30deg) !important;
    opacity: 0 !important;
  }

  /* Card swiping right (like) */
  .card-stack-item.swipe-right {
    transform: translateX(150%) translateY(50px) rotate(30deg) !important;
    opacity: 0 !important;
  }

  /* Card scaling up to become top card */
  .card-stack-item.scaling-up {
    transform: scale(1) translateY(0) rotate(0deg);
    opacity: 1;
  }

  /* Text reveal animation */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .hero-section h1,
  .hero-section .prose,
  .hero-section a {
    animation: fadeInUp 0.8s ease-out forwards;
  }

  .hero-section h1 {
    animation-delay: 0.2s;
  }

  .hero-section .prose {
    animation-delay: 0.4s;
    opacity: 0;
  }

  .hero-section a:first-of-type {
    animation-delay: 0.6s;
    opacity: 0;
  }

  .hero-section a:last-of-type {
    animation-delay: 0.7s;
    opacity: 0;
  }
</style>

<script>
  // Tinder-style Card Stack Swipe Animation
  const cards = document.querySelectorAll('.card-stack-item');
  const slideDuration = 4000; // 4 seconds per swipe
  let currentIndex = 0;
  const totalCards = cards.length;

  function updateStack() {
    cards.forEach((card, index) => {
      const cardEl = card as HTMLElement;
      const relativeIndex = (index - currentIndex + totalCards) % totalCards;

      // Reset all classes
      cardEl.classList.remove('top-card', 'swipe-left', 'swipe-right', 'scaling-up');
      cardEl.style.transform = '';
      cardEl.style.opacity = '';
      cardEl.style.zIndex = `${totalCards - relativeIndex}`;

      if (relativeIndex === 0) {
        // Top card - currently visible
        cardEl.classList.add('top-card');
      } else if (relativeIndex === 1) {
        // Second card - slightly smaller, offset
        cardEl.style.transform = 'scale(0.94) translateY(6px)';
        cardEl.style.opacity = '0.9';
      } else if (relativeIndex === 2) {
        // Third card - even smaller
        cardEl.style.transform = 'scale(0.88) translateY(12px)';
        cardEl.style.opacity = '0.7';
      } else {
        // Cards deeper in stack
        cardEl.style.transform = 'scale(0.82) translateY(18px)';
        cardEl.style.opacity = '0.5';
      }
    });
  }

  function swipeCard() {
    const currentCard = cards[currentIndex] as HTMLElement;

    // Randomly swipe left or right
    const swipeDirection = Math.random() > 0.5 ? 'swipe-left' : 'swipe-right';
    currentCard.classList.add(swipeDirection);

    // After animation completes, move to next card
    setTimeout(() => {
      currentIndex = (currentIndex + 1) % totalCards;
      updateStack();

      // Reset the swiped card position for next time
      setTimeout(() => {
        currentCard.classList.remove(swipeDirection);
      }, 100);
    }, 800); // Match the CSS transition duration
  }

  // Initialize stack
  updateStack();

  // Start auto-swipe
  setInterval(swipeCard, slideDuration);
</script>
