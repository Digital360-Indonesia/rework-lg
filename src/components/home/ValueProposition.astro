---
/**
 * Value Proposition Section Component - Level Garment Homepage
 *
 * Features:
 * - "Wujudkan Kebersamaan & Kreatifitas" heading (left-aligned, full width no wrap)
 * - Auto-sliding video carousel (7 videos, loops continuously)
 * - Smooth horizontal sliding animation
 * - Autoplay with no controls
 *
 * @version 1.0.0
 */

// Video data - 7 videos from project folder
const videos = [
  {
    id: 1,
    src: '/assets/videos/homepage/video-1_1.mp4',
    alt: 'Level Garment Portfolio Video 1'
  },
  {
    id: 2,
    src: '/assets/videos/homepage/video-2_1.mp4',
    alt: 'Level Garment Portfolio Video 2'
  },
  {
    id: 3,
    src: '/assets/videos/homepage/video-3_1.mp4',
    alt: 'Level Garment Portfolio Video 3'
  },
  {
    id: 4,
    src: '/assets/videos/homepage/video-4_1.mp4',
    alt: 'Level Garment Portfolio Video 4'
  },
  {
    id: 5,
    src: '/assets/videos/homepage/video-5_1.mp4',
    alt: 'Level Garment Portfolio Video 5'
  },
  {
    id: 6,
    src: '/assets/videos/homepage/video-6_1.mp4',
    alt: 'Level Garment Portfolio Video 6'
  },
  {
    id: 7,
    src: '/assets/videos/homepage/video-7_1.mp4',
    alt: 'Level Garment Portfolio Video 7'
  }
];

// Section content from WordPress
const sectionHeading = "Wujudkan Kebersamaan & Kreatifitas";
const sectionSubheading = "Mulai dari kaos, jaket, jersey, workshirt, topi semuanya bisa kamu custom disini!";
---

<!-- Value Proposition Section -->
<section
  id="value-proposition"
  class="value-proposition-section py-16 lg:py-24 bg-white"
>
  <!-- Section Header - Left Aligned -->
  <div class="container mx-auto px-4">
    <div class="text-left max-w-none mb-12 lg:mb-16">
      <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-6 whitespace-nowrap">
        {sectionHeading}
      </h2>
      <p class="text-lg sm:text-xl text-gray-600">
        {sectionSubheading}
      </p>
    </div>
  </div>

  <!-- Auto-Sliding Video Carousel - Full Width -->
  <div class="video-carousel-container overflow-hidden -mx-4 lg:-mx-0">
    <div class="video-carousel-track flex gap-3 lg:gap-4 px-4 lg:px-0" id="videoTrack">
      {videos.map((video) => (
        <div class="video-card flex-shrink-0 w-[60vw] sm:w-[45vw] lg:w-[18vw] aspect-[9/16] rounded-xl overflow-hidden shadow-lg">
          <video
            src={video.src}
            alt={video.alt}
            class="w-full h-full object-cover"
            autoplay
            muted
            loop
            playsinline
            loading="lazy"
            preload="metadata"
          />
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  /* Video carousel smooth sliding animation */
  .video-carousel-track {
    animation: slideRight 20s linear infinite;
  }

  @keyframes slideRight {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  /* Pause animation on hover */
  .video-carousel-container:hover .video-carousel-track {
    animation-play-state: paused;
  }

  /* Video card styling */
  .video-card {
    user-select: none;
    -webkit-user-drag: none;
  }

  .video-card video {
    pointer-events: none;
    user-select: none;
    -webkit-user-drag: none;
  }
</style>

<script>
  // Duplicate videos for seamless looping
  const track = document.getElementById('videoTrack');
  const videos = track.querySelectorAll('.video-card');

  // Clone all videos and append to create seamless loop
  videos.forEach((video) => {
    const clone = video.cloneNode(true);
    const videoElement = clone.querySelector('video');
    // Reset cloned video
    if (videoElement) {
      videoElement.currentTime = 0;
    }
    track.appendChild(clone);
  });

  // Enhance video experience - autoplay when in viewport
  document.querySelectorAll('.video-card video').forEach((video) => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          video.play().catch(() => {
            // Autoplay was prevented, that's okay
          });
        }
      });
    }, {
      threshold: 0.1
    });

    observer.observe(video);
  });
</script>
