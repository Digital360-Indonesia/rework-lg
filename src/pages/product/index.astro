---
/**
 * Product Page - Level Garment
 *
 * Complete product catalog with category navigation and all products
 *
 * Features:
 * - Category navigation with smooth scroll
 * - All 4 main categories (T-Shirt, Jersey, Workshirt, Jacket)
 * - 11 subcategories with descriptions
 * - 16+ product images with WhatsApp CTAs
 * - Responsive design
 * - SEO optimized
 *
 * CLI 4 Implementation - Product Catalog System
 * @version 2.0.0
 */
import PageLayout from '../../layouts/PageLayout.astro';
import CategoryNav from '../../components/product/CategoryNav.astro';
import ProductGrid from '../../components/product/ProductGrid.astro';
import productsData from '../../data/products.json';
import siteConfig from '../../data/site-config.json';

const { categories } = productsData;

// SEO metadata
const title = 'Produk - Level Garment';
const description = 'Lihat koleksi produk konveksi Level Garment: Jersey, Jaket, Kaos, dan Workshirt custom kualitas premium. T-Shirt, Jersey Basic/Baseball/Basket, Workshirt Basic/PDH, Jacket Bomber/Coach/Parka/Trucker/Varsity.';
const image = '/assets/images/products/jacket/20250523-Lineup-Jacket.webp';
---

<PageLayout
  title={title}
  description={description}
  image={image}
  showHero={false}
>
  <div class="product-page">
    <!-- Hero Section - Full Screen Image -->
    <section class="product-hero">
      <div class="hero-background">
        <img src="/assets/images/products/20250523-Product-Banner.webp" alt="Level Garment Products" class="hero-image" loading="eager" />
        <div class="hero-overlay"></div>
      </div>
    </section>

    <!-- Category Navigation -->
    <CategoryNav />

    <!-- Product Categories -->
    <main class="product-categories">
      {categories.map((category, index) => (
        <ProductGrid category={category} index={index} />
      ))}
    </main>

    <!-- Features Banner -->
    <section class="features-banner">
      <div class="container">
        <div class="features-grid">
          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
              </svg>
            </div>
            <h3>Gratis Desain</h3>
            <p>Tim desain kami bantu buatkan desain sesuai keinginanmu</p>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
              </svg>
            </div>
            <h3>Kualitas Premium</h3>
            <p>Bahan berkualitas tinggi dengan jahitan rapi dan tahan lama</p>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
              </svg>
            </div>
            <h3>Harga Terjangkau</h3>
            <p>Harga pelajar dengan kualitas konveksi profesional</p>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
              </svg>
            </div>
            <h3>Pengiriman Nasional</h3>
            <p>Melayani pengiriman ke seluruh Indonesia</p>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="product-cta-section">
      <div class="cta-background">
        <div class="cta-gradient"></div>
      </div>
      <div class="container">
        <div class="cta-content">
          <div class="cta-badge">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            <span>Respon Cepat</span>
          </div>
          <h2 class="cta-title">
            Tidak menemukan yang kamu cari?
          </h2>
          <p class="cta-subtitle">
            Konsultasikan kebutuhan custommu dengan tim kami. Gratis konsultasi!
          </p>
          <a
            href={siteConfig.contact.whatsappUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="cta-button"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            <span>Chat WhatsApp Sekarang</span>
          </a>
        </div>
      </div>
    </section>
  </div>

  <!-- Image Modal -->
  <div id="imageModal" class="image-modal" aria-hidden="true">
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-content">
      <button class="modal-close" data-close-modal aria-label="Close modal">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
      <img id="modalImage" src="" alt="" class="modal-image" />
      <div class="modal-info">
        <span id="modalCategory" class="modal-category"></span>
        <span id="modalSubcategory" class="modal-subcategory"></span>
      </div>
    </div>
  </div>
</PageLayout>

<style>
  /* CSS Custom Properties - Brand Colors */
  :root {
    --primary: #AF7AD5;
    --primary-light: #C494E0;
    --primary-dark: #9A66C2;
    --secondary: #1E3A5F;
    --secondary-light: #2A4A73;
    --secondary-dark: #152E4D;
    --accent: #FFC107;
    --accent-light: #FFD54F;
    --accent-dark: #FFA000;
    --dark: #1A1A2E;
    --dark-light: #2A2A42;
  }

  /* Product Page Base Styles */
  .product-page {
    font-family: 'Inter', 'Poppins', sans-serif;
  }

  .product-categories {
    background-color: #ffffff;
  }

  /* ===== HERO SECTION - FULL SCREEN IMAGE ===== */
  .product-hero {
    position: relative;
    height: 100vh;
    max-height: 90vh;
    overflow: hidden;
  }

  .hero-background {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .hero-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      180deg,
      rgba(30, 58, 95, 0.3) 0%,
      rgba(30, 58, 95, 0.1) 50%,
      rgba(30, 58, 95, 0.4) 100%
    );
    pointer-events: none;
  }

  /* ===== FEATURES BANNER ===== */
  .features-banner {
    padding: 4rem 0;
    background: linear-gradient(180deg, #f8f9fc 0%, #ffffff 100%);
    border-top: 1px solid rgba(175, 122, 213, 0.1);
    border-bottom: 1px solid rgba(175, 122, 213, 0.1);
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
  }

  .feature-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 0.75rem;
  }

  .feature-icon {
    width: 3.5rem;
    height: 3.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-radius: 1rem;
    color: #ffffff;
    box-shadow: 0 4px 12px rgba(175, 122, 213, 0.3);
  }

  .feature-icon svg {
    width: 1.5rem;
    height: 1.5rem;
  }

  .feature-item h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--secondary);
    margin: 0;
    font-family: 'Poppins', sans-serif;
  }

  .feature-item p {
    font-size: 0.875rem;
    color: #6b7280;
    line-height: 1.5;
    margin: 0;
    font-family: 'Inter', sans-serif;
  }

  /* ===== CTA SECTION ===== */
  .product-cta-section {
    position: relative;
    padding: 5rem 0;
    overflow: hidden;
  }

  .cta-background {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .cta-gradient {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 50%, var(--secondary) 100%);
  }

  .cta-background::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image:
      radial-gradient(circle at 20% 50%, rgba(255, 193, 7, 0.15) 0%, transparent 40%),
      radial-gradient(circle at 80% 50%, rgba(255, 255, 255, 0.08) 0%, transparent 40%);
  }

  .cta-content {
    position: relative;
    z-index: 1;
    text-align: center;
    max-width: 42rem;
    margin: 0 auto;
  }

  .cta-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 2rem;
    color: #ffffff;
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 1.5rem;
    backdrop-filter: blur(10px);
  }

  .cta-badge svg {
    width: 1rem;
    height: 1rem;
    color: var(--accent);
  }

  .cta-title {
    font-size: 2rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 1rem;
    font-family: 'Poppins', sans-serif;
  }

  .cta-subtitle {
    font-size: 1.125rem;
    color: rgba(255, 255, 255, 0.85);
    margin-bottom: 2rem;
    font-family: 'Inter', sans-serif;
  }

  .cta-button {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 2.5rem;
    background-color: #25D366;
    color: #ffffff;
    text-decoration: none;
    border-radius: 3rem;
    font-size: 1rem;
    font-weight: 600;
    box-shadow: 0 8px 20px rgba(37, 211, 102, 0.4);
    transition: all 0.3s ease;
    font-family: 'Inter', sans-serif;
  }

  .cta-button svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  .cta-button:hover {
    background-color: #20bd5a;
    box-shadow: 0 12px 28px rgba(37, 211, 102, 0.5);
    transform: translateY(-3px);
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 1023px) {
    .product-hero {
      max-height: 70vh;
    }

    .features-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem;
    }

    .features-banner {
      padding: 3rem 0;
    }

    .cta-title {
      font-size: 1.75rem;
    }
  }

  @media (max-width: 767px) {
    .product-hero {
      max-height: 60vh;
    }

    .features-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .features-banner {
      padding: 2.5rem 0;
    }

    .feature-item {
      flex-direction: row;
      text-align: left;
    }

    .feature-icon {
      width: 3rem;
      height: 3rem;
      flex-shrink: 0;
    }

    .product-cta-section {
      padding: 3rem 0;
    }

    .cta-title {
      font-size: 1.5rem;
    }

    .cta-subtitle {
      font-size: 1rem;
    }

    .cta-button {
      font-size: 0.9375rem;
      padding: 0.875rem 1.75rem;
      width: 100%;
      max-width: 20rem;
    }
  }

  /* Smooth scroll behavior for the whole page */
  html {
    scroll-behavior: smooth;
  }

  /* Offset for anchor links */
  [id] {
    scroll-margin-top: 80px;
  }

  @media (max-width: 767px) {
    [id] {
      scroll-margin-top: 70px;
    }
  }

  /* ===== IMAGE MODAL ===== */
  .image-modal {
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
  }

  .image-modal.active {
    opacity: 1;
    visibility: visible;
  }

  .modal-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(175, 122, 213, 0.5);
    backdrop-filter: blur(8px);
  }

  .modal-content {
    position: relative;
    max-width: 90vw;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    animation: modalZoom 0.3s ease-out;
  }

  @keyframes modalZoom {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .modal-close {
    position: absolute;
    top: -3rem;
    right: 0;
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--primary);
    border: none;
    border-radius: 50%;
    color: #ffffff;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(175, 122, 213, 0.4);
  }

  .modal-close:hover {
    background: var(--primary-dark);
    transform: scale(1.1);
  }

  .modal-close svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  .modal-image {
    max-width: 100%;
    max-height: 80vh;
    object-fit: contain;
    border-radius: 0.5rem;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  }

  .modal-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    margin-top: 1rem;
  }

  .modal-category {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--primary-light);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-family: 'Inter', sans-serif;
  }

  .modal-subcategory {
    font-size: 1.25rem;
    font-weight: 600;
    color: #ffffff;
    font-family: 'Poppins', sans-serif;
  }

  @media (max-width: 767px) {
    .modal-close {
      top: -2.5rem;
      width: 2rem;
      height: 2rem;
    }

    .modal-close svg {
      width: 1rem;
      height: 1rem;
    }

    .modal-image {
      max-height: 70vh;
    }

    .modal-subcategory {
      font-size: 1rem;
    }
  }
</style>

<script>
  // Image Modal Functionality
  const modal = document.getElementById('imageModal');
  const modalImage = document.getElementById('modalImage');
  const modalCategory = document.getElementById('modalCategory');
  const modalSubcategory = document.getElementById('modalSubcategory');

  // Open modal when clicking product card
  document.querySelectorAll('.product-card').forEach(card => {
    card.addEventListener('click', function(e) {
      // Don't open modal if clicking the WhatsApp CTA
      if (e.target.closest('.product-card-cta')) return;

      const img = this.querySelector('.product-card-image img');
      const category = this.querySelector('.product-category')?.textContent;
      const subcategory = this.querySelector('.product-subcategory')?.textContent;

      if (img) {
        modalImage.src = img.src;
        modalImage.alt = img.alt;
        modalCategory.textContent = category || '';
        modalSubcategory.textContent = subcategory || '';
        modal.classList.add('active');
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }
    });
  });

  // Close modal functions
  function closeModal() {
    modal.classList.remove('active');
    modal.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
  }

  // Close on backdrop click
  document.querySelectorAll('[data-close-modal]').forEach(el => {
    el.addEventListener('click', closeModal);
  });

  // Close on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.classList.contains('active')) {
      closeModal();
    }
  });
</script>

<!-- Structured Data for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "Produk - Level Garment",
  "description": "Lihat koleksi produk konveksi Level Garment: Jersey, Jaket, Kaos, dan Workshirt custom kualitas premium.",
  "url": "https://levelgarment.com/product/",
  "mainEntity": {
    "@type": "ItemList",
    "itemListElement": categories.map((cat, index) => ({
      "@type": "Product",
      "position": index + 1,
      "name": cat.name,
      "category": cat.name
    }))
  }
}
</script>
